<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Anime</title>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.css}" />
    <link th:rel="stylesheet" th:href="@{/webjars/font-awesome/5.15.4/css/all.css}" />
    <script th:src="@{/webjars/jquery/3.0.0/jquery.min.js}"></script>
</head>
<body>
<div th:fragment="AdminAnimeEdit">
    <form th:action="@{'/admin/anime/update/' + ${anime.id}}" method="post" enctype="multipart/form-data" id="frmSave">
        <h4>Edit Anime</h4>

        <div class="alert alert-warning" id="message"></div>

        <script>
            $(function () {
                $("#message").hide();

                $("#btnSave").click(function () {
                    let animeName = $("#animeName").val();
                    let title = $("#title").val();
                    let description = $("#description").val();
                    let hashtag = $("#hashtag").val();
                    let link = $("#link").val();

                    let content = "";
                    if (animeName === "") {
                        content = "Anime Name must not be blank!";
                    }
                    if (title === "") {
                        content += "<br>Title must not be blank!";
                    }
                    if (description === "") {
                        content += "<br>Description must not be blank!";
                    }
                    if (hashtag === "") {
                        content += "<br>Hashtag must not be blank!";
                    }
                    if (link === "") {
                        content += "<br>Link must not be blank!";
                    } else {
                        $("#frmSave").submit();
                    }

                    $("#message").html(content);
                    $("#message").show();
                });
            });
        </script>

        <div class="mt-3 mb-3">
            <label for="animeName">Anime Name</label>
            <input type="text" name="animeName" id="animeName" th:value="${anime.animeName}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="title">Title</label>
            <input type="text" name="title" id="title" th:value="${anime.title}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="description">Description</label>
            <input type="text" name="description" id="description" th:value="${anime.description}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="hashtag">Hashtag</label>
            <input type="text" name="hashtag" id="hashtag" th:value="${anime.hashtag}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="image">Image</label>
            <input type="file" name="image" id="image" th:value="${anime.image}"class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="trailer">Trailer</label>
            <input type="file" name="trailer" id="trailer" th:value="${anime.trailer}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3">
            <label for="link">Link</label>
            <input type="text" name="link" id="link" th:value="${anime.link}" class="form-control form-control-sm">
        </div>

        <div class="mt-3 mb-3" th:if="${categoryAnimes != null}">
            <label for="CategoryAnime">Category Anime</label>
            <select name="category_anime_id" id="CategoryAnime" class="form-control form-control-sm">
                <option th:each="obj : ${categoryAnimes}" th:value="${obj.id}" th:text="${obj.categoryName}"></option>
            </select>
        </div>

        <div class="mt-3 mb-3">
            <button type="button" id="btnSave" class="btn btn-primary btn-sm">Save</button>
        </div>
    </form>
</div>
</body>
</html>
